<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Serviço</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body class="bg-light">

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-5">

          <h2 class="text-center mb-4 fw-bold text-primary">Cadastro de Serviços</h2>

          <form method="POST"
                th:action="@{/cadastroServico}"
                th:object="${informacao}"
                class="row g-3 needs-validation"
                novalidate>

            <input type="hidden" th:field="*{id}"/>

            <!-- Nome -->
            <div class="col-md-12">
              <label class="form-label fw-semibold">Nome do Serviço</label>
              <input type="text" class="form-control"
                     th:field="*{nome}"
                     placeholder="Ex: Ultrassom abdominal" required>
              <div class="invalid-feedback">Informe o nome do serviço.</div>
            </div>

            <!-- Descrição -->
            <div class="col-md-12">
              <label class="form-label fw-semibold">Descrição</label>
              <textarea class="form-control"
                        th:field="*{descricao}"
                        rows="3"
                        placeholder="Descreva brevemente o serviço"
                        required></textarea>
              <div class="invalid-feedback">A descrição é obrigatória.</div>
            </div>

            <!-- Tempo -->
            <div class="col-md-6">
              <label class="form-label fw-semibold">Tempo Necessário (minutos)</label>
              <input type="number" min="1"
                     class="form-control"
                     th:field="*{tempoNecessario}"
                     placeholder="Ex: 30" required>
              <div class="invalid-feedback">Informe o tempo estimado.</div>
            </div>

            <!-- Tipo -->
            <div class="col-md-6">
              <label class="form-label fw-semibold">Tipo de Agendamento</label>
              <select class="form-select" th:field="*{tipoAgendamento}" required>
                <option value="" disabled selected>Selecione...</option>

                <option th:each="t : ${T(br.com.hospital.model.Informacoes.TipoAgendamento).values()}"
                        th:value="${t}"
                        th:text="${t}">
                </option>
              </select>
              <div class="invalid-feedback">Selecione um tipo de serviço.</div>
            </div>

            <!-- Especialidade -->
            <div class="col-md-12">
              <label class="form-label fw-semibold">Especialidade Relacionada</label>
              <select class="form-select" th:field="*{especialidadeRelacionada}" required>
                <option value="" disabled selected>Selecione...</option>

                <option th:each="esp : ${T(br.com.hospital.model.Medico.Especialidade).values()}"
                        th:value="${esp}"
                        th:text="${esp}">
                </option>
              </select>
              <div class="invalid-feedback">Selecione uma especialidade.</div>
            </div>

            <div class="col-12 text-center mt-4">
              <button type="submit" class="btn btn-primary px-4">Salvar</button>
              <a href="/dashboardAdmin" class="btn btn-secondary px-4">Cancelar</a>
            </div>

          </form>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script>
  // Validação visual Bootstrap
  (() => {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();
</script>

</body>
</html>
