<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital - Painel do M√©dico</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; }

        .sidebar {
            height: 100vh;
            background-color: #00334d;
            color: white;
            position: fixed;
            top: 0; left: 0;
            width: 250px;
            padding-top: 20px;
        }

        .sidebar a {
            color: white;
            padding: 12px 20px;
            display: block;
            text-decoration: none;
            transition: .3s;
        }

        .sidebar a:hover,
        .sidebar a.active { background-color: #004d66; }

        .content { margin-left: 250px; padding: 25px; }

        .topbar {
            background: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0px 2px 6px rgba(0,0,0,0.1);
            display: flex; justify-content: space-between; align-items: center;
        }

        .card { border-radius: 12px; border: none; box-shadow: 0px 3px 8px rgba(0,0,0,0.15); }
        .card:hover { transform: translateY(-5px); transition: .2s; }

        .card-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .secao { display: none; }
        .secao.ativa { display: block; }
        .no-data { text-align: center; color: #777; padding: 40px 0; }
    </style>

</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h4 class="text-center mb-4">ü©∫ Painel M√©dico</h4>

    <a id="link-dashboard" class="active" onclick="mostrarSecao('dashboard', this)">
        <i class="bi bi-speedometer2 me-2"></i> Dashboard
    </a>
    <a onclick="mostrarSecao('consultas', this)">
        <i class="bi bi-journal-medical me-2"></i> Consultas
    </a>
    <a onclick="mostrarSecao('exames', this)">
        <i class="bi bi-file-medical me-2"></i> Exames
    </a>
    <a onclick="mostrarSecao('procedimentos', this)">
        <i class="bi bi-heart-pulse me-2"></i> Procedimentos
    </a>
    <a onclick="mostrarSecao('perfil', this)">
        <i class="bi bi-person-circle me-2"></i> Perfil
    </a>

    <hr class="mx-3">

    <a href="/" class="text-danger">
        <i class="bi bi-box-arrow-right me-2"></i> Sair
    </a>
</div>


<!-- CONTE√öDO -->
<div class="content">

    <!-- TOPBAR -->
    <div class="topbar mb-4">
        <h3 class="m-0">Painel do M√©dico - <span th:text="${medico.nome}">Dr. Jo√£o</span></h3>
        <i class="bi bi-person-badge fs-3"></i>
    </div>

    <!-- DASHBOARD -->
    <section id="dashboard" class="secao ativa">
        <div class="text-center mb-4">
            <h4>Bem-vindo(a), <span th:text="${medico.nome}">Dr. Jo√£o</span></h4>
            <p class="text-muted">Veja um resumo das suas atividades.</p>
        </div>

        <div class="row text-center mb-4">

            <!-- CONSULTAS -->
            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-person-x card-icon"></i>
                    <h5>Consultas Canceladas</h5>
                    <p class="fs-4 fw-bold"><span th:text="${CONSULTA_CANCELADO}"></span></p>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-person-check card-icon"></i>
                    <h5>Consultas Conclu√≠das</h5>
                    <p class="fs-4 fw-bold"><span th:text="${CONSULTA_CONCLUIDO}"></span></p>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-person-lines-fill card-icon"></i>
                    <h5>Consultas Pendentes</h5>
                    <p class="fs-4 fw-bold"><span th:text="${CONSULTA_AGENDADO}"></span></p>
                </div>
            </div>

            <!-- EXAMES -->
            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-file-earmark-x card-icon"></i>
                    <h5>Exames Cancelados</h5>
                    <p class="fs-4 fw-bold"><span th:text="${EXAME_CANCELADO}"></span></p>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-file-earmark-check card-icon"></i>
                    <h5>Exames Conclu√≠dos</h5>
                    <p class="fs-4 fw-bold"><span th:text="${EXAME_CONCLUIDO}"></span></p>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-file-earmark-text card-icon"></i>
                    <h5>Exames Pendentes</h5>
                    <p class="fs-4 fw-bold"><span th:text="${EXAME_AGENDADO}"></span></p>
                </div>
            </div>

            <!-- PROCEDIMENTOS -->
            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-heartbreak card-icon"></i>
                    <h5>Procedimentos Cancelados</h5>
                    <p class="fs-4 fw-bold"><span th:text="${PROCEDIMENTO_CANCELADO}"></span></p>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-heart-check card-icon"></i>
                    <h5>Procedimentos Conclu√≠dos</h5>
                    <p class="fs-4 fw-bold"><span th:text="${PROCEDIMENTO_CONCLUIDO}"></span></p>
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <div class="card p-4">
                    <i class="bi bi-heart card-icon"></i>
                    <h5>Procedimentos Pendentes</h5>
                    <p class="fs-4 fw-bold"><span th:text="${PROCEDIMENTO_AGENDADO}"></span></p>
                </div>
            </div>

        </div>
    </section>


    <!-- CONSULTAS -->
    <section id="consultas" class="secao">
        <div class="card p-4">
            <h4 class="mb-3"><i class="bi bi-journal-medical me-2"></i> Consultas</h4>

            <table class="table table-striped align-middle">
                <thead>
                <tr>
                    <th>Data</th>
                    <th>Paciente</th>
                    <th>Status</th>
                    <th>A√ß√µes</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="consulta : ${consultasMedico}">
                    <td th:text="${#temporals.format(consulta.data, 'dd/MM/yyyy HH:mm')}"></td>
                    <td th:text="${consulta.paciente.nome}"></td>
                    <td th:text="${consulta.status}"></td>

                    <td>
                        <a th:if="${consulta.status.name() == 'AGENDADO'}"
                           th:href="@{/atendimento/consulta/{id}(id=${consulta.id})}"
                           class="btn btn-sm btn-primary">Realizar</a>

                        <a th:if="${consulta.status.name() == 'AGENDADO'}"
                           th:href="@{/atendimento/cancelar/consulta/{id}(id=${consulta.id})}"
                           class="btn btn-sm btn-danger">Cancelar</a>

                        <span th:if="${consulta.status.name() == 'CONCLUIDO'}" class="badge bg-success">Conclu√≠da</span>
                        <span th:if="${consulta.status.name() == 'CANCELADO'}" class="badge bg-danger">Cancelada</span>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(consultasMedico)}">
                    <td colspan="4" class="no-data">Nenhuma consulta encontrada.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>


    <!-- EXAMES -->
    <section id="exames" class="secao">
        <div class="card p-4">
            <h4 class="mb-3"><i class="bi bi-file-medical me-2"></i> Exames</h4>

            <table class="table table-striped align-middle">
                <thead>
                <tr>
                    <th>Data</th>
                    <th>Paciente</th>
                    <th>Status</th>
                    <th>A√ß√µes</th>
                </tr>
                </thead>
                <tbody>

                <tr th:each="exame : ${examesMedico}">
                    <td th:text="${#temporals.format(exame.data, 'dd/MM/yyyy HH:mm')}"></td>
                    <td th:text="${exame.paciente.nome}"></td>
                    <td th:text="${exame.status}"></td>

                    <td>
                        <a th:if="${exame.status.name() == 'AGENDADO'}"
                           th:href="@{/atendimento/exame/{id}(id=${exame.id})}"
                           class="btn btn-sm btn-primary">Realizar</a>

                        <a th:if="${exame.status.name() == 'AGENDADO'}"
                           th:href="@{/atendimento/cancelar/exame/{id}(id=${exame.id})}"
                           class="btn btn-sm btn-danger">Cancelar</a>

                        <span th:if="${exame.status.name() == 'CONCLUIDO'}" class="badge bg-success">Conclu√≠do</span>
                        <span th:if="${exame.status.name() == 'CANCELADO'}" class="badge bg-danger">Cancelado</span>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(examesMedico)}">
                    <td colspan="4" class="no-data">Nenhum exame encontrado.</td>
                </tr>

                </tbody>
            </table>

        </div>
    </section>


    <!-- PROCEDIMENTOS -->
    <section id="procedimentos" class="secao">
        <div class="card p-4">
            <h4 class="mb-3"><i class="bi bi-heart-pulse me-2"></i> Procedimentos</h4>

            <table class="table table-striped align-middle">
                <thead>
                <tr>
                    <th>Data</th>
                    <th>Paciente</th>
                    <th>Status</th>
                    <th>A√ß√µes</th>
                </tr>
                </thead>
                <tbody>

                <tr th:each="proc : ${procedimentosMedico}">
                    <td th:text="${#temporals.format(proc.data, 'dd/MM/yyyy HH:mm')}"></td>
                    <td th:text="${proc.paciente.nome}"></td>
                    <td th:text="${proc.status}"></td>

                    <td>
                        <a th:if="${proc.status.name() == 'AGENDADO'}"
                           th:href="@{/atendimento/procedimento/{id}(id=${proc.id})}"
                           class="btn btn-sm btn-primary">Realizar</a>

                        <a th:if="${proc.status.name() == 'AGENDADO'}"
                           th:href="@{/atendimento/cancelar/procedimento/{id}(id=${proc.id})}"
                           class="btn btn-sm btn-danger">Cancelar</a>

                        <span th:if="${proc.status.name() == 'CONCLUIDO'}" class="badge bg-success">Conclu√≠do</span>
                        <span th:if="${proc.status.name() == 'CANCELADO'}" class="badge bg-danger">Cancelado</span>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(procedimentosMedico)}">
                    <td colspan="4" class="no-data">Nenhum procedimento encontrado.</td>
                </tr>

                </tbody>
            </table>

        </div>
    </section>


    <!-- PERFIL -->
    <section id="perfil" class="secao">
        <div class="card p-4">
            <h4><i class="bi bi-person-circle me-2"></i> Perfil</h4>
            <p>Nome: <b th:text="${medico.nome}"></b></p>
            <p>Email: <b th:text="${medico.email}"></b></p>
            <p>CRM: <b th:text="${medico.crm}"></b></p>
        </div>
    </section>

</div>

<script>
    function mostrarSecao(id, link) {
        document.querySelectorAll('.secao').forEach(sec => sec.classList.remove('ativa'));
        document.getElementById(id).classList.add('ativa');

        document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
        link.classList.add('active');
    }
</script>

</body>
</html>
